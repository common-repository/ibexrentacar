<?php
/*
Plugin Name: Ibexrentacar
Plugin URI: http://www.ibexrentacar.com/
Description: Plugin de WordPress para conectar tu blog con la plataforma de gestión de Ibexrentacar.
Version: 1.7
Author: Ibexestudio
Author URI: http://www.ibexrentacar.com
*/
?>
<?php $parse_uri = explode( 'wp-content', $_SERVER['SCRIPT_FILENAME'] );require_once($parse_uri[0].'wp-load.php'); require_once($parse_uri[0].'wp-config.php');require_once($parse_uri[0].'wp-includes/wp-db.php'); require_once($parse_uri[0].'wp-admin/includes/taxonomy.php'); if(!function_exists('wp_handle_upload'))require_once($parse_uri[0].'wp-admin/includes/file.php');global $sitepress, $wpdb, $language_json;if($language_json==""){$pathtrans = str_replace("/irc/frontend/shortcode","/language/",dirname(__FILE__)).'translates.json'; if(file_exists($pathtrans))$language_json = file_get_contents($pathtrans);}$rparams = $_REQUEST; $wp_page_list = get_pages(array('sort_column' => 'post_title', 'sort_order' => 'desc'));if(isset($rparams['use_customcss']))$rparams['include_css'] = str_replace("/plugins/ibexrentacar/","/plugins/ibexrentacar_custom/",$GLOBALS['lsPluginPath'])."widget.css";?><?php  if($rparams['action']=='code'){?><div style="margin-top:10px"><?php  echo _irct("Copie y pegue el siguiente código en el cuerpo del Post o la Página donde desea visualizarlo",$_REQUEST['wplang']); ?>:</div><div class="ircApssShortcodeCode"> <div id="ircInsertShPageCode" style="text-align:left"> [irc type="<?php  echo $rparams['type'] ?>" include_jquery="<?php  echo $rparams['include_jquery'] ?>" view="<?php  echo $rparams['view_id_selected'] ?>" <?php  if($rparams['widget_width']){?>width="<?php  echo $rparams['widget_width'] ?>"<?php  }?> <?php  if($rparams['widget_width_results'] && ($rparams["type"]=='search' || $rparams["type"]=='searchday' || $rparams["type"]=='searchlarge' || $rparams["type"]=='searchsmart')){?>result_width="<?php  echo $rparams['widget_width_results'] ?>"<?php  }?> <?php  if($rparams['result_view_model'] && $rparams["type"]=='modeldata'){?>model="<?php  echo $rparams["result_view_model"] ?>"<?php  }?> <?php  if($rparams['result_featured_items'] && $rparams["type"]=='featured'){?>featured_items="<?php  echo $rparams['result_featured_items'] ?>"<?php  }?> <?php  if($rparams['result_view'] && $rparams["type"]=='fleet'){?>result_view="<?php  echo $rparams['result_view'] ?>"<?php  }?> <?php  if($rparams['result_fleetprice']){?>vprice="<?php  echo $rparams['result_fleetprice'] ?>"<?php  }?> <?php  if($rparams['result_view_vclass'] && $rparams['result_view_vclass']!='all'){?>vclass="<?php  echo $rparams['result_view_vclass'] ?>"<?php  }?> <?php  if($rparams['include_css']){?>include_css="<?php  echo $rparams['include_css'] ?>"<?php  }?><?php  if($rparams['result_fleetcategory'] && $rparams['result_fleetcategory']!='all'){?> filter_category="<?php  echo $rparams['result_fleetcategory'] ?>"<?php  }?><?php  if($rparams['result_view_category'] && $rparams['result_view_category']!='all'){?> category_id="<?php  echo $rparams['result_view_category'] ?>"<?php  }?>] </div></div><?php   ?><br /><a href="javascript:ircptoggleId('irc_shortode_advoptions');ircptoggleId('irc_shortcode_ircEvent');"><?php  echo _irct("Ver más opciones de integración",$_REQUEST['wplang']) ?></a><br /><div id="irc_shortode_advoptions" style="display: none"><?php  if($rparams["type"]=='search' || $rparams["type"]=='searchday' || $rparams["type"]=='searchlarge' || $rparams["type"]=='searchsmart'){?><br /><?php  echo _irct("Por defecto se muestran los resultados de búsquedad de disponibilidad a continuación del buscador",$_REQUEST['wplang']) ?>. <?php  echo _irct("Si desea integrar los resultados en cualquier otro lugar de la misma página debe utilizar el siguiente código",$_REQUEST['wplang']) ?>:<br /><div class="ircApssShortcodeCode"> <div style="text-align:left"><strong><?php  echo _irct("Buscador",$_REQUEST['wplang']) ?></strong><br>[irc type="<?php  echo $rparams['type'] ?>" include_jquery="<?php  echo $rparams['include_jquery'] ?>" view="<?php  echo $rparams['view_id_selected'] ?>" <?php  if($rparams['widget_width']){?>width="<?php  echo $rparams['widget_width'] ?>"<?php  }?> <?php  if($rparams['widget_width_results']){?>result_width="<?php  echo $rparams['widget_width_results'] ?>"<?php  }?> <?php  if($rparams['result_view']){?>result_view="<?php  echo $rparams['result_view'] ?>"<?php  }?> <?php  if($rparams['result_fleetprice']){?>vprice="<?php  echo $rparams['result_fleetprice'] ?>"<?php  }?> <?php  if($rparams['result_view_vclass'] && $rparams['result_view_vclass']!='all'){?>vclass="<?php  echo $rparams['result_view_vclass'] ?>"<?php  }?> <?php  if($rparams['include_css']){?>include_css="<?php  echo $rparams['include_css'] ?>"<?php  }?> layout="divide"]<br /><br /><strong><?php  echo _irct("Resultados",$_REQUEST['wplang']) ?></strong><br /> [irc type="result" <?php  if($rparams['widget_width_results']){?>result_width="<?php  echo $rparams['widget_width_results'] ?>"<?php  }?>] </div></div><?php  }?><br /><?php  echo _irct("O puede integrar directamente el código del widget generado, copie el siguiente código en su sitio web",$_REQUEST['wplang']) ?>:<br /><div class="ircApssCode"> <?php  if($rparams['type']=='fleet'){?> &lt;script async="async" src="<?php  echo $rparams['param_url'] ?>/widget/?include_jquery=<?php  echo $rparams['include_jquery'] ?>&amp;view_id=<?php  echo $rparams['view_id_selected'] ?>&amp;key=<?php  echo $rparams['key'] ?>&amp;result_view=<?php  echo $rparams['result_view'] ?><?php  if($rparams['include_css']){?>&amp;include_css=<?php  echo $rparams['include_css'] ?><?php  }?><?php  if($rparams['result_view_vclass'] && $rparams['result_view_vclass']!='all'){?>&amp;vclass=<?php  echo $rparams['result_view_vclass'] ?><?php  }?><?php  if($rparams['result_fleetprice']){?>&amp;vprice=<?php  echo $rparams['result_fleetprice'] ?><?php  }?><?php  if($rparams['result_fleetcategory'] && $rparams['result_fleetcategory']!='all'){?>&amp;filter_category=<?php  echo $rparams['result_fleetcategory'] ?><?php  }?><?php  if($rparams['result_view_category'] && $rparams['result_view_category']!='all'){?>&amp;category_id=<?php  echo $rparams['result_view_category'] ?><?php  }?>"&gt;&lt;/script&gt;<br />&lt;div id="irc_fleet" style="width: <?php  echo $rparams['widget_width'] ?>;"&gt;&lt;/div&gt; <?php  }?> <?php  if($rparams["type"]=='search'){?> &lt;script async="async" src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&amp;view_id=<?php  echo $rparams["view_id_selected"] ?>&amp;key=<?php  echo $rparams["key"]?><?php  if($rparams["include_css"]){?>&amp;include_css=<?php  echo $rparams["include_css"] ?><?php  }?>"&gt;&lt;/script&gt;<br />&lt;div id="irc_search" style="width: <?php  echo $rparams["widget_width_box_search"] ?>;"&gt;&lt;/div&gt;<br />&lt;div id="irc_result" style="width: <?php  echo $rparams["widget_width_results"] ?>;"&gt;&lt;/div&gt; <?php  }?> <?php  if($rparams["type"]=='searchday'){?> &lt;script async="async" src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&amp;view_id=<?php  echo $rparams["view_id_selected"] ?>&amp;key=<?php  echo $rparams["key"]?><?php  if($rparams["include_css"]){?>&amp;include_css=<?php  echo $rparams["include_css"] ?><?php  }?>"&gt;&lt;/script&gt;<br />&lt;div id="irc_searchday" style="width: <?php  echo $rparams["widget_width_box_search"] ?>;"&gt;&lt;/div&gt;<br />&lt;div id="irc_result" style="width: <?php  echo $rparams["widget_width_results"] ?>;"&gt;&lt;/div&gt; <?php  }?> <?php  if($rparams["type"]=='searchlarge'){?> &lt;script async="async" src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&amp;view_id=<?php  echo $rparams["view_id_selected"] ?>&amp;key=<?php  echo $rparams["key"]?><?php  if($rparams["include_css"]){?>&amp;include_css=<?php  echo $rparams["include_css"] ?><?php  }?>"&gt;&lt;/script&gt;<br />&lt;div id="irc_searchlarge" style="width: <?php  echo $rparams["widget_width_box_search"] ?>;"&gt;&lt;/div&gt;<br />&lt;div id="irc_result" style="width: <?php  echo $rparams["widget_width_results"] ?>;"&gt;&lt;/div&gt; <?php  }?> <?php  if($rparams["type"]=='home'){?> &lt;script async="async" src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&view_id=<?php  echo $rparams["view_id_selected"] ?>&amp;key=<?php  echo $rparams["key"]?><?php  if($rparams["include_css"]){?>&amp;include_css=<?php  echo $rparams["include_css"] ?><?php  }?>"&gt;&lt;/script&gt;<br />&lt;div id="irc_home" style="width: <?php  echo $rparams["widget_width_box_search"] ?>;"&gt;&lt;/div&gt; <?php  }?> <?php  if($rparams["type"]=='searchsmart'){?> &lt;script async="async" src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&view_id=<?php  echo $rparams["view_id_selected"] ?>&amp;key=<?php  echo $rparams["key"]?><?php  if($rparams["include_css"]){?>&amp;include_css=<?php  echo $rparams["include_css"] ?><?php  }?>"&gt;&lt;/script&gt; <br />&lt;div id="irc_searchsmart" style="width: <?php  echo $rparams["widget_width_box_search"] ?>;"&gt;&lt;/div&gt;<br />&lt;div id="irc_result" style="width: <?php  echo $rparams["widget_width_results"] ?>;"&gt;&lt;/div&gt; <?php  }?> <?php  if($rparams["type"]=='modeldata'){?> &lt;script async="async" src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&amp;view_id=<?php  echo $rparams["view_id_selected"] ?>&amp;key=<?php  echo $rparams["key"]?>&amp;model=<?php  echo $rparams["result_view_model"] ?><?php  if($rparams["include_css"]){?>&amp;include_css=<?php  echo $rparams["include_css"] ?><?php  }?>"&gt;&lt;/script&gt;<br />&lt;div id="irc_vehicle" style="width: <?php  echo $rparams["widget_width"] ?>;"&gt;&lt;/div&gt; <?php  }?> <?php  if($rparams["type"]=='featured'){?> &lt;script async="async" src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&amp;view_id=<?php  echo $rparams["view_id_selected"] ?>&amp;key=<?php  echo $rparams["key"]?>&amp;featured_items=<?php  echo $rparams["result_featured_items"] ?><?php  if($rparams["include_css"]){?>&amp;include_css=<?php  echo $rparams["include_css"] ?><?php  }?><?php  if($rparams["result_featured_price"]){?>&amp;vprice=<?php  echo $rparams["result_featured_price"] ?><?php  }?>"&gt;&lt;/script&gt;<br />&lt;div id="irc_featured" style="width: <?php  echo $rparams["widget_width"] ?>;"&gt;&lt;/div&gt; <?php  }?> <?php  if($rparams["type"]=='account'){?> &lt;script src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&amp;view_id=<?php  echo $rparams["view_id_selected"] ?>&amp;key=<?php  echo $rparams["key"]?><?php  if($rparams["include_css"]){?>&amp;include_css=<?php  echo $rparams["include_css"] ?><?php  }?>"&gt;&lt;/script&gt;<br />&lt;div id="irc_account" style="width: <?php  echo $rparams["widget_width"] ?>;"&gt;&lt;/div&gt; <?php  }?> <?php  if($rparams["type"]=='contact'){?> &lt;script async="async" src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&amp;view_id=<?php  echo $rparams["view_id_selected"] ?>&amp;key=<?php  echo $rparams["key"]?><?php  if($rparams["include_css"]){?>&amp;include_css=<?php  echo $rparams["include_css"] ?><?php  }?>"&gt;&lt;/script&gt;<br />&lt;div id="irc_contact" style="width: <?php  echo $rparams["widget_width"] ?>;"&gt;&lt;/div&gt; <?php  }?></div> <?php  }?><br /></div> <?php  if($rparams['action']=='preview'){?> <div align="center"> <?php  if($rparams["type"]=='fleet'){?> <script async="async" src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&view_id=<?php  echo $rparams["view_id_selected"] ?>&key=<?php  echo $rparams["key"] ?>&result_view=<?php  echo $rparams["result_view"] ?><?php  if($rparams["include_css"]){?>&include_css=<?php  echo $rparams["include_css"] ?><?php  }?><?php  if($rparams["result_view_vclass"] && $rparams["result_view_vclass"]!='all'){?>&vclass=<?php  echo $rparams["result_view_vclass"] ?><?php  }?><?php  if($rparams["result_fleetprice"]){?>&vprice=<?php  echo $rparams["result_fleetprice"] ?><?php  }?><?php  if($rparams['result_fleetcategory'] && $rparams['result_fleetcategory']!='all'){?>&filter_category=<?php  echo $rparams['result_fleetcategory'] ?><?php  }?><?php  if($rparams['result_view_category'] && $rparams['result_view_category']!='all'){?>&category_id=<?php  echo $rparams['result_view_category'] ?><?php  }?>&autoscroll=0"></script><div id="irc_fleet" style="width: <?php  echo $rparams["widget_width"] ?>;"></div> <?php  }?> <?php  if($rparams["type"]=='home'){?> <script async="async" src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&view_id=<?php  echo $rparams["view_id_selected"] ?>&key=<?php  echo $rparams["key"] ?><?php  if($rparams["include_css"]){?>&include_css=<?php  echo $rparams["include_css"] ?><?php  }?>&autoscroll=0"></script><div id="irc_home" style="width: <?php  echo $rparams["widget_width"] ?>;"></div> <?php  }?> <?php  if($rparams["type"]=='searchsmart'){?> <script async="async" src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&view_id=<?php  echo $rparams["view_id_selected"] ?>&key=<?php  echo $rparams["key"]?><?php  if($rparams["include_css"]){?>&include_css=<?php  echo $rparams["include_css"] ?><?php  }?>&autoscroll=0"></script><div id="irc_searchsmart" style="width: <?php  echo $rparams["widget_width_box_search"] ?>;"></div><div id="irc_result" style="width: <?php  echo $rparams["widget_width_results"] ?>;"></div> <?php  }?> <?php  if($rparams["type"]=='search'){?> <script async="async" src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&view_id=<?php  echo $rparams["view_id_selected"] ?>&key=<?php  echo $rparams["key"]?><?php  if($rparams["include_css"]){?>&include_css=<?php  echo $rparams["include_css"] ?><?php  }?>&autoscroll=0"></script><div id="irc_search" style="width: <?php  echo $rparams["widget_width_box_search"] ?>;"></div><div id="irc_result" style="width: <?php  echo $rparams["widget_width_results"] ?>;"></div> <?php  }?> <?php  if($rparams["type"]=='searchday'){?> <script async="async" src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&view_id=<?php  echo $rparams["view_id_selected"] ?>&key=<?php  echo $rparams["key"]?><?php  if($rparams["include_css"]){?>&include_css=<?php  echo $rparams["include_css"] ?><?php  }?>&autoscroll=0"></script><div id="irc_searchday" style="width: <?php  echo $rparams["widget_width_box_search"] ?>;"></div><div id="irc_result" style="width: <?php  echo $rparams["widget_width_results"] ?>;"></div> <?php  }?> <?php  if($rparams["type"]=='searchlarge'){?> <script async="async" src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&view_id=<?php  echo $rparams["view_id_selected"] ?>&key=<?php  echo $rparams["key"]?><?php  if($rparams["include_css"]){?>&include_css=<?php  echo $rparams["include_css"] ?><?php  }?>&autoscroll=0"></script><div id="irc_searchlarge" style="width: <?php  echo $rparams["widget_width_box_search"] ?>;"></div><div id="irc_result" style="width: <?php  echo $rparams["widget_width_results"] ?>%;"></div> <?php  }?> <?php  if($rparams["type"]=='modeldata'){?> <script async="async" src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&view_id=<?php  echo $rparams["view_id_selected"] ?>&key=<?php  echo $rparams["key"]?>&model=<?php  echo $rparams["result_view_model"] ?><?php  if($rparams["include_css"]){?>&include_css=<?php  echo $rparams["include_css"] ?><?php  }?>&autoscroll=0"></script><div id="irc_vehicle" style="width: <?php  echo $rparams["widget_width"] ?>;"></div> <?php  }?> <?php  if($rparams["type"]=='featured'){?> <script async="async" src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&view_id=<?php  echo $rparams["view_id_selected"] ?>&key=<?php  echo $rparams["key"]?>&featured_items=<?php  echo $rparams["result_featured_items"] ?><?php  if($rparams["include_css"]){?>&include_css=<?php  echo $rparams["include_css"] ?><?php  }?><?php  if($rparams["result_featured_price"]){?>&vprice=<?php  echo $rparams["result_featured_price"] ?><?php  }?>&autoscroll=0"></script><div id="irc_featured" style="width: <?php  echo $rparams["widget_width"] ?>;"></div> <?php  }?> <?php  if($rparams["type"]=='account'){?> <script async="async" src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&view_id=<?php  echo $rparams["view_id_selected"] ?>&key=<?php  echo $rparams["key"]?><?php  if($rparams["include_css"]){?>&include_css=<?php  echo $rparams["include_css"] ?><?php  }?>&autoscroll=0"></script><div id="irc_account" style="width: <?php  echo $rparams["widget_width"] ?>;"></div> <?php  }?> <?php  if($rparams["type"]=='contact'){?> <script async="async" src="<?php  echo $rparams["param_url"] ?>/widget/?include_jquery=<?php  echo $rparams["include_jquery"] ?>&view_id=<?php  echo $rparams["view_id_selected"] ?>&key=<?php  echo $rparams["key"]?><?php  if($rparams["include_css"]){?>&include_css=<?php  echo $rparams["include_css"] ?><?php  }?>&autoscroll=0"></script><div id="irc_contact" style="width: <?php  echo $rparams["widget_width"] ?>;"></div> <?php  }?> </div> <?php  } ?>